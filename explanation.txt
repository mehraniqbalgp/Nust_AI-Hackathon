================================================================================
        CAMPUSVERIFY - COMPLETE PROJECT EXPLANATION
        Anonymous Campus Rumor Verification System
================================================================================

ğŸ“‹ TABLE OF CONTENTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1.  What Is CampusVerify?
2.  The Problem It Solves
3.  How the System Works (User Perspective)
4.  System Architecture
5.  Frontend - File by File Breakdown
6.  Backend - File by File Breakdown
7.  Core Algorithms Explained
    7a. Trust Score Engine (5-Component Formula)
    7b. Token Economy (Game Theory)
    7c. Bot/Anomaly Detection
8.  Data Models
9.  Smart Contracts (Blockchain Layer)
10. Security Features
11. How Everything Connects Together
12. Complete User Journey (Step by Step)

================================================================================

1. WHAT IS CAMPUSVERIFY?
================================================================================

CampusVerify is a decentralized, anonymous campus rumor verification system. 
Think of it as a "truth marketplace" where students can:

  - Anonymously post rumors or claims about campus life
  - Stake tokens (virtual currency) on their claims being true
  - Vote to verify or dispute other people's rumors
  - Earn rewards for identifying truth, lose tokens for spreading lies
  - View trust scores that show how likely a rumor is to be true

The key innovation: NOBODY is in charge. There's no admin deciding what's true.
Instead, truth emerges from game theory - people are financially incentivized
to be honest because lying costs them tokens.


================================================================================

2. THE PROBLEM IT SOLVES
================================================================================

On every campus, rumors spread constantly:
  - "The exam is postponed to next week"
  - "The cafeteria failed a health inspection"
  - "Professor X is leaving the university"
  - "There was a security incident at the hostel"

CURRENT PROBLEMS:
  âŒ No way to verify anonymous claims
  âŒ False information causes panic, bad decisions
  âŒ Social media rewards engagement, not truth
  âŒ Popular posts aren't necessarily accurate
  âŒ Coordinated groups can manipulate opinions
  âŒ No accountability in anonymous systems

CAMPUSVERIFY SOLUTION:
  âœ… Stake-based system = skin in the game
  âœ… Multi-factor trust scoring = evidence-based truth
  âœ… Bot detection = can't be gamed by automation
  âœ… Token economy = truth-tellers get richer, liars go broke
  âœ… Anonymous but accountable through cryptographic identity


================================================================================

3. HOW THE SYSTEM WORKS (USER PERSPECTIVE)
================================================================================

STEP 1: USER GETS AN ACCOUNT
  - Opens the app at http://localhost:3000
  - System auto-creates an anonymous identity
  - Gets a random name like "Anonymous_Eagle" or "Secret_Wolf"
  - Starts with 100ğŸ’ tokens
  - No email, no phone, no personal data needed

STEP 2: BROWSING THE FEED
  - Main feed shows all campus rumors
  - Each rumor has a TRUST SCORE (0-100%)
  - Color-coded: ğŸŸ¢ Green = Verified, ğŸŸ¡ Yellow = Uncertain, ğŸ”´ Red = Disputed
  - Can filter by category: Academic, Facilities, Events, Food, Tech, Other
  - Can sort by: Trending, Recent, Most Verified

STEP 3: SUBMITTING A RUMOR
  - Click "Submit" tab
  - Step 1: Write your claim (minimum 10 characters)
  - Step 2: Choose a category
  - Step 3: Optionally attach evidence (photo, video, document)
  - Step 4: Set your stake (10-50ğŸ’ tokens)
  - Higher stake = more confidence = higher initial trust score
  - 10ğŸ’ tokens are deducted from your balance

STEP 4: VERIFYING / DISPUTING A RUMOR
  - Click âœ… Verify or âŒ Dispute on any rumor
  - Write optional evidence supporting your position
  - Set your stake (2-20ğŸ’ tokens)
  - Your vote weight depends on your REPUTATION
  - Higher reputation = your vote counts more

STEP 5: EARNING REWARDS
  - When a rumor gets enough votes + time passes, it RESOLVES
  - If you voted correctly â†’ get your stake back + 50% bonus + share of loser pool
  - If you voted incorrectly â†’ lose your staked tokens
  - If inconclusive â†’ get 50% refund

STEP 6: BUILDING REPUTATION
  - Accurate verifications increase your reputation (0.0 to 1.0)
  - False verifications decrease it
  - Higher reputation = higher vote weight = more influence
  - Unlock achievements for milestones


================================================================================

4. SYSTEM ARCHITECTURE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BROWSER (Frontend)                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Feed   â”‚ â”‚ Submit   â”‚ â”‚  Verify  â”‚ â”‚Dashboard â”‚          â”‚
â”‚  â”‚          â”‚ â”‚  Rumor   â”‚ â”‚  Rumor   â”‚ â”‚          â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚
â”‚       â”‚             â”‚            â”‚             â”‚                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚              Core JavaScript Modules                â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚        â”‚
â”‚  â”‚  â”‚  Store  â”‚ â”‚  Trust   â”‚ â”‚  Token   â”‚ â”‚Anomaly â”‚ â”‚        â”‚
â”‚  â”‚  â”‚  (.js)  â”‚ â”‚  Engine  â”‚ â”‚ Economy  â”‚ â”‚Detectorâ”‚ â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                       â”‚ fetch() + WebSocket                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SERVER (Backend)                             â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Express.js Server                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  Routes  â”‚ â”‚Middlewareâ”‚ â”‚ Services â”‚ â”‚  WebSocket â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ /rumors  â”‚ â”‚ botDetec â”‚ â”‚ database â”‚ â”‚ real-time  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ /verify  â”‚ â”‚ rateLimitâ”‚ â”‚ fingerpr â”‚ â”‚ broadcast  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ /users   â”‚ â”‚ auth     â”‚ â”‚ blockchainâ”‚ â”‚            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ /auth    â”‚ â”‚ errorHndlâ”‚ â”‚ zkproof  â”‚ â”‚            â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                                         â”‚
â”‚                         â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚           SQLite Database            â”‚                        â”‚
â”‚  â”‚  campusverify.db (24MB)              â”‚                        â”‚
â”‚  â”‚  Users | Rumors | Verifications      â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚     Solidity Smart Contracts         â”‚                        â”‚
â”‚  â”‚  TruthToken.sol | RumorLedger.sol    â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================

5. FRONTEND - FILE BY FILE BREAKDOWN
================================================================================

ğŸ“ Root Files:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  index.html           â†’ Main HTML page (skeleton of the app)
                         Loads all CSS and JS files
                         Contains navigation tabs (Feed, Submit, Dashboard)
                         Single-page application structure

  index.css            â†’ Complete stylesheet (50KB!)
                         Dark theme with CSS variables
                         Responsive design (mobile-first)
                         Complex animations, gradients, glassmorphism
                         Trust score colors, modal styles

ğŸ“ js/ - Core JavaScript Modules:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  js/app.js            â†’ Application Controller
                         Navigation between pages (Feed, Submit, Dashboard)
                         Toast notification system (success/error/warning)
                         Page routing and state management
                         Initializes all components on page load

  js/store.js          â†’ Data Store (State Management)
                         Uses localStorage to persist data
                         CRUD operations for: Users, Rumors, Evidence,
                           Verifications, Activities, Leaderboard
                         Real-time sync across browser tabs (BroadcastChannel)
                         Event listener system (pub/sub pattern)
                         Fetches rumors from API on initialization

  js/models.js         â†’ Data Model Definitions
                         createUser()         â†’ new anonymous user object
                         createRumor()        â†’ new rumor with trust scores
                         createEvidence()     â†’ evidence attachment
                         createVerification() â†’ vote record
                         createActivityEntry()â†’ activity log entry
                         Constants: EVIDENCE_WEIGHTS, CATEGORIES, ACHIEVEMENTS

  js/trustEngine.js    â†’ Trust Score Calculator (THE BRAIN)
                         5-component weighted trust formula:
                           V = Veracity (35%)     - Is it true?
                           C = Confidence (25%)   - How sure are we?
                           T = Temporal (20%)      - How recent?
                           S = Source (10%)        - Who submitted?
                           N = Network (10%)       - Voter agreement
                         Calculates boosts (evidence), penalties (bot patterns)
                         Determines status: verified/disputed/unverified

  js/tokenEconomy.js   â†’ Token/Reward System
                         submitRumor()     - Deducts stake, creates rumor
                         verify()          - Deducts stake, records vote
                         checkResolution() - Should rumor be resolved?
                         resolveRumor()    - Distribute rewards/penalties
                         calculateVoteWeight() - Reputation-based weighting
                         recordUserAction()    - For bot detection

  js/anomalyDetector.js â†’ Bot Detection System
                          analyzeRumor()        - Check rumor votes for anomalies
                          analyzeUserBehavior() - Analyze user for bot patterns
                          detectTemporalClustering() - Votes too close together?
                          detectUnnaturalPatterns()  - Regular intervals (bot)?
                          detectVelocitySpike()      - Sudden vote surge?
                          detectOneSidedVoting()     - All same direction?
                          getRecommendation()        - Action based on score

  js/api.js            â†’ API Client
                         Handles communication with backend server
                         Fetch rumors, submit rumors, verify/dispute
                         Error handling and retry logic

ğŸ“ js/components/ - UI Components:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Feed.js              â†’ Main Feed Page
                         Fetches rumors from API
                         Renders rumor cards in a list
                         Filter tabs: Trending, Recent, Verified
                         Category filtering
                         Real-time updates via WebSocket

  SubmitRumor.js       â†’ Rumor Submission Wizard (4 steps)
                         Step 1: Write content (min 10 chars)
                         Step 2: Choose category
                         Step 3: Add evidence (photos, videos, docs)
                         Step 4: Review & confirm stake
                         Bot detection check before submission
                         File upload with 10MB limit, base64 encoding
                         60-second timeout for large uploads

  VerifyRumor.js       â†’ Verification Modal
                         Opens when user clicks Verify/Dispute
                         Select vote type (support/dispute)
                         Set stake amount (slider)
                         Add optional evidence text
                         Bot detection check before voting
                         Posts to API, updates local store

  RumorCard.js         â†’ Individual Rumor Display
                         Trust score gauge with color coding
                         Vote counts (support vs dispute)
                         Evidence thumbnails (images/videos)
                         View evidence in modal
                         Download evidence files
                         Fetches full video data from API on demand

  Dashboard.js         â†’ User Dashboard
                         Token balance display
                         Reputation score
                         Activity history
                         Achievement badges
                         Staked tokens summary

  Leaderboard.js       â†’ Leaderboard Page
                         Top users by reputation
                         Rankings by accuracy
                         Token earnings display


================================================================================

6. BACKEND - FILE BY FILE BREAKDOWN
================================================================================

ğŸ“ server/ - Main Server Files:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  database.server.js   â†’ Standalone Database Server (MAIN SERVER FILE)
                         Express.js on port 3000
                         SQLite database (campusverify.db)
                         Serves static files (HTML/CSS/JS)
                         API endpoints:
                           GET  /api/rumors         â†’ list rumors (stripped)
                           GET  /api/rumors/:id     â†’ single rumor (full data)
                           POST /api/rumors          â†’ create rumor
                           POST /api/rumors/:id/verify â†’ submit vote
                         WebSocket server for real-time updates
                         Strips video data from list responses (performance)

  index.js             â†’ Full Express Server (alternative entry)
                         Uses modular routes and middleware
                         Mounts all route handlers
                         Initializes WebSocket, database

  simple.js            â†’ Simplified Server
                         Basic Express server for testing
                         Fewer dependencies

  migrate.js           â†’ Database Migration Runner
                         Reads SQL files from migrations/
                         Applies schema changes to SQLite

ğŸ“ server/routes/ - API Route Handlers:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  rumors.js            â†’ /api/rumors routes
                         CRUD operations for rumors
                         Pagination (limit/offset)
                         Category filtering
                         Sorting options

  verifications.js     â†’ /api/verifications routes
                         Submit verification votes
                         Check duplicate votes
                         Get verifications for a rumor

  users.js             â†’ /api/users routes
                         Get user profile
                         Update user data
                         User statistics

  auth.js              â†’ /api/auth routes
                         Anonymous authentication
                         Session management
                         Credential verification

  captcha.js           â†’ /api/captcha routes
                         CAPTCHA generation
                         Bot prevention at registration

  upload.js            â†’ /api/upload routes
                         File upload handling
                         Multer middleware
                         Size/type validation

ğŸ“ server/middleware/ - Request Processing:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  botDetection.js      â†’ Server-side bot detection
                         Checks request patterns
                         Rate of API calls
                         Blocks suspicious IPs/users

  rateLimiter.js       â†’ Rate limiting
                         Prevents API abuse
                         Per-IP request limits
                         Sliding window algorithm

  authenticate.js      â†’ Authentication check
                         Validates user tokens
                         Anonymous identity verification

  errorHandler.js      â†’ Global error handler
                         Catches unhandled errors
                         Returns consistent error responses
                         Logs errors for debugging

ğŸ“ server/services/ - Business Logic:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  database.js          â†’ SQLite database service
                         Connection management
                         Query helpers
                         Table creation

  botDetector.js       â†’ Server-side bot analysis
                         IP-based detection
                         Request pattern analysis
                         User behavior scoring

  fingerprint.js       â†’ Device fingerprinting
                         Browser fingerprint hashing
                         Prevents multi-account abuse
                         Privacy-preserving identification

  blockchain.js        â†’ Blockchain integration
                         Smart contract interaction
                         Token transactions on-chain
                         Immutable rumor ledger

  zkproof.js           â†’ Zero-Knowledge Proofs
                         Proves identity without revealing it
                         Anonymous credential verification
                         Privacy-preserving verification

  websocket.js         â†’ WebSocket service
                         Real-time event broadcasting
                         New rumor notifications
                         Vote count updates

  captcha.js           â†’ CAPTCHA service
                         Challenge generation
                         Verification logic

  redis.js             â†’ Redis caching (optional)
                         Session storage
                         Rate limit counters
                         Leaderboard caching

  ipfs.js              â†’ IPFS integration
                         Decentralized file storage
                         Evidence permanence
                         Content-addressed storage

ğŸ“ server/migrations/ - Database Schema:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  001_initial_schema.sql â†’ Creates all database tables:
                          users, rumors, verifications,
                          evidence, activities, anomaly_logs

ğŸ“ contracts/ - Solidity Smart Contracts:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  TruthToken.sol       â†’ ERC-20 token contract
                         Campus truth verification tokens
                         Minting, burning, staking logic
                         Reward distribution

  RumorLedger.sol      â†’ Rumor ledger contract
                         Immutable rumor records
                         Verification proofs on-chain
                         Dispute resolution logic


================================================================================

7. CORE ALGORITHMS EXPLAINED
================================================================================

7a. TRUST SCORE ENGINE (How Truth Is Calculated)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

The trust score is a WEIGHTED SUM of 5 components:

  FINAL SCORE = 0.35Ã—V + 0.25Ã—C + 0.20Ã—T + 0.10Ã—S + 0.10Ã—N

Each component ranges from 0.0 to 1.0, then the sum is scaled to 0-100.

  V = VERACITY (35% weight) - "Is the information true?"
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â€¢ Based on evidence quality and voter behavior
    â€¢ Photo evidence: weight 0.5
    â€¢ Video evidence: weight 0.5
    â€¢ Documentary evidence: weight 0.6
    â€¢ Testimony: weight 0.3
    â€¢ Diminishing returns for same evidence types
    â€¢ Dispute votes add contradiction penalty

  C = CONFIDENCE (25% weight) - "How sure are we?"
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â€¢ Base: 0.5 (testimony), 0.7 (media), 0.9 (documents)
    â€¢ Sample size: more voters = more confidence
    â€¢ Time factor: recent votes = more reliable
    â€¢ Diversity factor: votes spread over time = more trustworthy
    â€¢ Clustered votes (within 2 min) = LOW confidence (suspicious)

  T = TEMPORAL RELEVANCE (20% weight) - "Is it still relevant?"
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â€¢ Events/Food: Fast decay (expires quickly)
    â€¢ Academic/Facilities: Slow decay (stays relevant)
    â€¢ Tech/Other: Medium decay
    â€¢ Uses exponential decay function

  S = SOURCE RELIABILITY (10% weight) - "Is the submitter trustworthy?"
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â€¢ Based on submitter's track record
    â€¢ Formula: (accurate - 2Ã—false) / total_submissions
    â€¢ New users: neutral 0.5
    â€¢ False claims penalized 2x more than accurate claims rewarded

  N = NETWORK CONSENSUS (10% weight) - "Do voters agree?"
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â€¢ Weighted by voter reputation
    â€¢ 100% support = 1.0, 100% dispute = 0.0
    â€¢ Suspicious patterns reduce consensus score
    â€¢ Bot-detected votes get penalty

  BOOSTS:
    +10 points for documentary evidence
    +10 points for expert verifier consensus

  PENALTIES:
    -20 points if bot patterns detected
    -15 points if strong contradiction (many disputes)

  STATUS:
    Score >= 70 â†’ "VERIFIED" (green)
    Score <= 30 â†’ "DISPUTED" (red)
    31-69       â†’ "UNVERIFIED" (yellow)


7b. TOKEN ECONOMY (Game Theory)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  STARTING BALANCE: 100ğŸ’ tokens
  MAX BALANCE: 500ğŸ’ tokens

  SUBMITTING A RUMOR:
    â€¢ Costs 5-50ğŸ’ tokens (your choice)
    â€¢ Higher stake = more confidence in your claim
    â€¢ Tokens are LOCKED until rumor resolves

  VERIFYING A RUMOR:
    â€¢ Costs 2-20ğŸ’ tokens
    â€¢ Your vote weight = 0.5 + (reputation Ã— 1.5)
    â€¢ New users have 60% reduced weight
    â€¢ Inactive users have reduced weight

  RESOLUTION:
    Triggered when: 5+ votes AND (24 hours passed OR strong consensus)
    
    IF VERIFIED (score >= 70%):
      â€¢ Correct voters get: stake back + 50% bonus + share of loser pool
      â€¢ Wrong voters lose: entire staked amount
      â€¢ Submitter gets: stake back + 50% bonus + reputation increase
    
    IF REFUTED (score <= 30%):
      â€¢ Correct voters (dispute) get: stake + bonus + loser pool share
      â€¢ Wrong voters (support) lose: staked tokens
      â€¢ Submitter loses: staked tokens + reputation decrease
    
    IF INCONCLUSIVE (31-69%):
      â€¢ Everyone gets: 50% refund on stake

  WHY IT WORKS:
    â€¢ Lying is expensive (lose tokens)
    â€¢ Truth-telling is profitable (win tokens + bonus)
    â€¢ Game theory: rational actors will vote truthfully
    â€¢ Bots can't accumulate influence (detected + blocked)


7c. BOT / ANOMALY DETECTION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

The system detects bots at TWO levels:

  LEVEL 1: USER BEHAVIOR ANALYSIS (analyzeUserBehavior)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Checks the user's action history for bot-like patterns:

    FLAG: regular_timing (+0.3 score)
      â†’ Actions at perfectly regular intervals
      â†’ Coefficient of variation < 0.1 = suspicious
      â†’ Humans naturally have irregular timing

    FLAG: 24_7_activity (+0.2 score)
      â†’ Active across 20+ different hours of the day
      â†’ Humans sleep! Bots don't.
      â†’ Uses hour distribution analysis

    FLAG: single_action_type (+0.2 score)
      â†’ Only performing one type of action (e.g., only voting)
      â†’ After 10+ actions, if no diversity = suspicious
      â†’ Humans browse, submit, vote, etc.

    MAX POSSIBLE BOT SCORE: 0.7 (triggers all 3 flags)

  LEVEL 2: RUMOR VOTE ANALYSIS (analyzeRumor)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Checks voting patterns on individual rumors:

    FLAG: temporal_clustering (+0.3 score)
      â†’ 5+ votes within a 2-minute window
      â†’ Suggests coordinated attack

    FLAG: unnatural_pattern (+0.4 score)
      â†’ Votes at perfectly regular intervals (1s, 5s, 10s apart)
      â†’ Humans vote at random intervals

    FLAG: velocity_spike (+0.25 score)
      â†’ Voting rate 5x higher than average for all rumors
      â†’ Suggests botnet attack

    FLAG: one_sided_voting (+0.15 score)
      â†’ 100% of votes in same direction
      â†’ 5+ votes all support or all dispute = suspicious

  AUTOMATED RESPONSE:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Score 0.0 - 0.3 â†’ MINOR:    No action taken
    Score 0.3 - 0.5 â†’ MODERATE: Enhanced monitoring, activity logged
    Score 0.5 - 0.7 â†’ SEVERE:   Vote weight REDUCED by 50%, warning shown
    Score 0.7 - 1.0 â†’ CRITICAL: Vote BLOCKED entirely, modal shows error

  WHERE ENFORCEMENT HAPPENS:
    â€¢ VerifyRumor.js â†’ submit() checks bot score before allowing vote
    â€¢ SubmitRumor.js â†’ submit() checks bot score before allowing post
    â€¢ TrustEngine.js â†’ calculatePenalties() reduces trust for bot-voted rumors


================================================================================

8. DATA MODELS
================================================================================

USER:
  {
    id:                 "id_abc123"           // Unique anonymous ID
    username:           "Anonymous_Eagle"     // Random anonymous name
    credentialHash:     "id_xyz789"           // Zero-knowledge credential
    tokenBalance:       100                   // Available tokens
    stakedTokens:       0                     // Tokens locked in bets
    totalSubmissions:   0                     // Rumors submitted
    verifiedAccurate:   0                     // Correct verifications
    verifiedFalse:      0                     // Wrong verifications
    reputationScore:    0.5                   // 0.0 to 1.0
    actionTimestamps:   []                    // For bot detection
    botScore:           0                     // Current bot score
    status:             "active"              // active/flagged/suspended
    unlockedAchievements: []                  // Achievement list
  }

RUMOR:
  {
    id:                 "id_abc123"
    submitterId:        "id_user1"
    content:            "The library wifi is down"
    category:           "facilities"
    veracityScore:      0.5                   // V component
    confidenceScore:    0.3                   // C component
    temporalRelevance:  1.0                   // T component
    sourceReliability:  0.5                   // S component
    networkConsensus:   0.5                   // N component
    finalTrustScore:    50                    // 0-100 final score
    supportCount:       3                     // Verify votes
    disputeCount:       1                     // Dispute votes
    evidenceIds:        ["id_ev1"]            // Attached evidence
    stakeAmount:        10                    // Tokens staked
    status:             "active"              // active/verified/refuted/disputed
    evidenceFiles:      [...]                 // File attachments (photos/videos)
  }

VERIFICATION:
  {
    id:                 "id_ver1"
    rumorId:            "id_abc123"
    verifierId:         "id_user2"
    voteType:           "support"             // support or dispute
    stakeAmount:        5
    voteWeight:         1.0                   // Reputation-adjusted
    nullifierHash:      "id_hash"             // Prevents double voting
    wasCorrect:         null                  // Set on resolution
  }

EVIDENCE:
  {
    id:                 "id_ev1"
    rumorId:            "id_abc123"
    submitterId:        "id_user1"
    type:               "photo"               // photo/video/documentary/testimony
    description:        "Screenshot of..."
    weight:             0.5                   // Type-based weight
    qualityScore:       0.8
    contentHash:        "id_hash"             // Immutability check
  }


================================================================================

9. SMART CONTRACTS (Blockchain Layer)
================================================================================

The project includes Solidity smart contracts for future blockchain integration:

  TruthToken.sol (ERC-20):
    â€¢ Mintable/burnable truth verification tokens
    â€¢ Staking mechanism for rumor submission
    â€¢ Automated reward distribution
    â€¢ Role-based access control

  RumorLedger.sol:
    â€¢ Immutable record of all rumors
    â€¢ On-chain verification proofs
    â€¢ Dispute resolution via smart contract
    â€¢ Transparent audit trail

  Hardhat Configuration:
    â€¢ hardhat.config.js set up for local development
    â€¢ Contract deployment scripts in scripts/
    â€¢ Test framework in test/

Currently runs WITHOUT blockchain (SQLite only). Smart contracts are
ready for deployment when scaling to a production blockchain network.


================================================================================

10. SECURITY FEATURES
================================================================================

  1. ANONYMOUS IDENTITY
     â€¢ No personal data collected
     â€¢ Cryptographic fingerprinting instead of names
     â€¢ Zero-knowledge proof infrastructure ready

  2. BOT DETECTION (3 layers)
     Layer 1: Client-side behavioral analysis (anomalyDetector.js)
     Layer 2: Server-side pattern detection (middleware/botDetection.js)
     Layer 3: Rate limiting (middleware/rateLimiter.js)

  3. ANTI-MANIPULATION
     â€¢ Token staking prevents spam (costs money to post/vote)
     â€¢ Reputation-weighted voting (new accounts have less influence)
     â€¢ Suspicious pattern penalties on trust scores
     â€¢ Double-vote prevention via nullifier hashes

  4. DATA INTEGRITY
     â€¢ Content hashes for immutability checking
     â€¢ IPFS integration ready for decentralized storage
     â€¢ Blockchain audit trail (smart contracts)

  5. RATE LIMITING
     â€¢ Per-IP request limits  
     â€¢ Per-user action throttling
     â€¢ CAPTCHA for suspicious activity


================================================================================

11. HOW EVERYTHING CONNECTS TOGETHER
================================================================================

  USER OPENS APP
       â”‚
       â–¼
  index.html loads â†’ app.js initializes
       â”‚
       â–¼
  Store.init() â†’ Creates user, fetches rumors from API
       â”‚
       â–¼
  Feed.render() â†’ Shows rumor cards from Store data
       â”‚
       â”œâ”€â”€â”€â”€ User clicks SUBMIT tab
       â”‚     SubmitRumor wizard â†’ validates â†’ calls API
       â”‚     POST /api/rumors â†’ saves to SQLite â†’ broadcasts via WebSocket
       â”‚     TokenEconomy.submitRumor() â†’ deducts tokens
       â”‚     AnomalyDetector checks â†’ blocks if bot score >= 0.7
       â”‚
       â”œâ”€â”€â”€â”€ User clicks VERIFY on a rumor
       â”‚     VerifyRumor modal opens â†’ user selects vote + stake
       â”‚     AnomalyDetector.analyzeUserBehavior() â†’ bot check
       â”‚     POST /api/rumors/:id/verify â†’ saves to SQLite
       â”‚     TokenEconomy.verify() â†’ deducts stake, records vote
       â”‚     TrustEngine.calculateTrustScore() â†’ recalculates 5 components
       â”‚     Store.updateRumor() â†’ updates local display
       â”‚     WebSocket broadcasts update to all connected clients
       â”‚
       â”œâ”€â”€â”€â”€ System checks RESOLUTION
       â”‚     TokenEconomy.checkResolution() â†’ enough votes + time?
       â”‚     If yes â†’ resolveRumor() â†’ distribute rewards/penalties
       â”‚     Winners get: stake + 50% bonus + loser pool share
       â”‚     Losers get: nothing (stake forfeited)
       â”‚
       â””â”€â”€â”€â”€ User views DASHBOARD
             Dashboard.render() â†’ shows tokens, reputation, activity


================================================================================

12. COMPLETE USER JOURNEY (Step by Step)
================================================================================

  1. Student hears: "Final exam for CS101 is postponed"
  
  2. Opens CampusVerify â†’ anonymous account created (100ğŸ’ tokens)
  
  3. Submits rumor:
     Content: "CS101 final exam postponed to next Friday"
     Category: Academic
     Evidence: Screenshot of email from professor
     Stake: 20ğŸ’ tokens
     â†’ Balance: 80ğŸ’ (20 locked as stake)
  
  4. Rumor appears in feed:
     Trust Score: 50% (initial, neutral)
     Status: UNVERIFIED (yellow)
  
  5. Other students see it, start voting:
     Student A: âœ… Verify (stakes 10ğŸ’, has seen the email too)
     Student B: âœ… Verify (stakes 5ğŸ’, heard from classmate)
     Student C: âŒ Dispute (stakes 5ğŸ’, thinks it's fake)
     Student D: âœ… Verify (stakes 15ğŸ’, has documentary evidence)
     Student E: âœ… Verify (stakes 10ğŸ’)
  
  6. Trust score updates in real-time:
     V = 0.7 (strong evidence)
     C = 0.65 (5 voters, good confidence)
     T = 0.95 (very recent)
     S = 0.5 (new submitter)
     N = 0.8 (4:1 in favor)
     Final = 0.35Ã—0.7 + 0.25Ã—0.65 + 0.20Ã—0.95 + 0.10Ã—0.5 + 0.10Ã—0.8
           = 0.245 + 0.163 + 0.19 + 0.05 + 0.08 = 0.728 Ã— 100 = 73%
     Status: VERIFIED âœ… (green)
  
  7. After 24 hours, rumor RESOLVES:
     Score: 73% â†’ VERIFIED
     
     WINNERS (original poster + 4 supporters):
       Each gets: stake returned + 50% bonus + share of Student C's 5ğŸ’
       Original poster: 20ğŸ’ back + 10ğŸ’ bonus + reputation boost
     
     LOSERS (Student C):
       Loses: 5ğŸ’ staked tokens
       Reputation decreases
  
  8. Meanwhile, a BOT tries to manipulate:
     Bot creates 15 accounts, votes dispute rapidly
     â†’ AnomalyDetector detects:
       â€¢ temporal_clustering (all within 30 seconds)
       â€¢ unnatural_pattern (100ms intervals)
       â€¢ one_sided_voting (all dispute)
     â†’ Score: 0.85 (CRITICAL)
     â†’ All bot votes: BLOCKED âŒ
     â†’ Trust score: not affected
     â†’ System shows: "ğŸš« Suspicious activity detected"


================================================================================
                    END OF PROJECT EXPLANATION
================================================================================
